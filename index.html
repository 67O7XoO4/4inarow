<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 in a ROW</title>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.0"></script>
    <script src="https://unpkg.com/vue-i18n@8.22.0/dist/vue-i18n.js"></script>
    
    <script type="module" src="./src/4inarow.js"></script>

    <style type="text/css">
    .user-card.mdl-card {
      width: 220px; 
      min-height : 0;
      margin-bottom: 20px;
      padding-bottom: 0;
    }

    .wide-card.mdl-card {
      
      margin: 20px;
      width: 500px; 
      background-color: rgb(245, 245, 245); 
    }

    .player-name{
      border-left: 10px solid;
    }
   </style>
   <script type="text/x-template" id="user-board-template">
    
      <div class="user-card mdl-grid mdl-card "
          v-bind:class="{'mdl-shadow--4dp' : isCurrentPlayer }">
        <div class="mdl-cell mdl-cell--10-col">
          <span class="player-name" v-bind:style="{color : player.color}"  >{{player.name}}</span>
        </div>
        <div class="mdl-cell mdl-cell--2-col" v-if="! player.isHuman() ">
          <!-- resume -->
          <button v-on:click="resume"
            :title="$t('playerSuspendedTitle')"
            class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored"
            v-if="player.suspended">
          <i class="material-icons md-36">play_circle_outline</i>
          </button>

          <!-- pause -->
          <button v-on:click="pause"
            :title="$t('suspendPlayerTitle')"
            class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored"
            v-if="! player.suspended">
          <i class="material-icons md-36">pause_circle_outline</i>
          </button>
        </div>

        <div class="mdl-cell mdl-cell--4-col">
          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" 
                v-bind:for="player.name" 
                :title="$t('changePlayerTypeTitle')">
            <input type="checkbox" 
                v-bind:id="player.name" class="mdl-switch__input"
                v-bind:checked="player.isHuman()" 
                v-on:change="changeStrategy">
            <span class="mdl-switch__label">
              <i v-if="player.isHuman()" :title="$t('playedByHumanTitle')"
                  class="material-icons">person</i>
              <i v-if="! player.isHuman()" :title="$t('playedByComputerTitle')" 
              class="material-icons">computer</i>
            </span>
          </label>
        </div>
        <div class="mdl-cell mdl-cell--7-col" v-show="! player.isHuman()">
            <input 
                class="mdl-slider mdl-js-slider" type="range"  min="1" max="10" v-model="player.strategy.depth" tabindex="0">
        </div>
        <div class="mdl-cell mdl-cell--1-col" v-show="! player.isHuman()">
          <span class="mdl-badge mdl-badge--overlap" v-bind:data-badge="player.strategy.depth" 
                :title="player.strategy.depth" v-show="! player.isHuman()">
          </span>
      </div>

        <div v-show="! player.isHuman()"  class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
          
      </div>
      
  </script>
  </head>
  <body>

    <div id="fourInARowApp" class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">

      <div class="mdl-layout__drawer">
        <span class="mdl-layout-title"><h4>{{ $t("title") }}</h4></span>
        
        
        <div class="mdl-grid">
          
          <div class="mdl-cell mdl-cell--1-col">
             <!-- Reset game -->
            <button v-on:click="start"
                :title="$t('cancelRestartTitle')"
                class="mdl-button mdl-js-button mdl-button--text mdl-button--colored">
                <i class="">{{ $t("restart") }}</i>
            </button>
          </div>
          
          <div class="mdl-cell mdl-cell--8-col">
          </div>
          
          <div class="mdl-cell mdl-cell--1-col">
             <!-- UNDO -->
            <button v-on:click="undo"
              :title="$t('undoTitle')"
              class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored"
              :disabled="isUndoDisabled">
              <i class="material-icons md-36">undo</i>
            </button>
          </div>

        </div>
        
        <user-board v-bind:player='players[0]'  v-on:resume='resume' ></user-board>
        
        <user-board v-bind:player='players[1]' v-on:resume='resume' ></user-board>

        <select v-model="$i18n.locale">
          <option v-for="(lang, i) in langs" :key="`Lang${i}`" :value="lang">{{ lang }}</option>
        </select>
        
      </div>
      <main class="mdl-layout__content">
        
        <div class="page-content">
          <div class="wide-card mdl-card mdl-shadow--2dp">
            <canvas id="boardCanvas" width="500" height="450"></canvas>
          </div>
        </div>

        <div id="snackbarmsg" class="mdl-js-snackbar mdl-snackbar">
          <div class="mdl-snackbar__text"></div>
          <button class="mdl-snackbar__action" type="button"></button>
        </div>
       

      </main>
    </div>

  </body>
</html>